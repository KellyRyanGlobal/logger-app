pipeline {
    agent any
    environment {
        DOCKER_USER = credentials('docker-username')
        DOCKER_PASS = credentials('docker-password')
        APP_NAME = 'test_app'
        VERSION = '1.0'
    }
    stages {
        stage('Build') {
            agent any
            steps {
                sh '''
                apt-get update && install docker-compose docker
                docker-compose up
                '''
            }
        }
        stage('Test') {
            agent any
            steps {
                sh '''
                docker exec logger sh -c "./test_app.exe" > output.out
                cat output.out
                '''
            }
        }
     }
}
